package main

import (
	"encoding/json"
	"fmt"
	"log"
	"strings"
)

// 定义结构体来匹配输入的JSON格式
type Item struct {
	Metadata struct {
		Labels struct {
			Project string `json:"project"`
			Ver     string `json:"ver"`
		} `json:"labels"`
		Name string `json:"name"`
	} `json:"metadata"`
	Spec struct {
		Source struct {
			RepoURL string `json:"repoURL"`
		} `json:"source"`
	} `json:"spec"`
}

// 输出格式
type Output struct {
	ProductName string `json:"产品名称"`
	AppName     string `json:"应用名称"`
	AppVersion  string `json:"应用版本"`
	DeployMode  string `json:"部署模式"`
}

// 定义一个结构体来接收包含 "items" 的 JSON 数据
type ItemsResponse struct {
	Items []Item `json:"items"` // 这里的 Items 会接收 items 数组
}

func main() {
	// 假设这是你输入的JSON字符串
	jsonData := `{"items":[{"metadata":{"creationTimestamp":"2023-12-15T08:48:38Z","labels":{"project":"sudytech-accauth","ver":"1.0-latest"},"name":"accauth-auth-proxy"},"spec":{"destination":{"namespace":"sudytech-accauth","server":"https://kubernetes.default.svc"},"project":"sudytech-accauth","source":{"path":"accauth-auth-proxy/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-accauth.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"d13f3e538532d6325038b212e3562ccfbd633593","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/policy-service:0.2.20"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-12-15T08:21:57Z","labels":{"project":"sudytech-accauth","ver":"1.0-latest"},"name":"accauth-frontend-api"},"spec":{"destination":{"namespace":"sudytech-accauth","server":"https://kubernetes.default.svc"},"project":"sudytech-accauth","source":{"path":"accauth-frontend-api/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-accauth.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"c1796d1834b757acef11b5d3a80250ba6a6591f6","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/accauth/accauth-frontend-api:latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-12-15T08:03:28Z","labels":{"project":"sudytech-accauth","ver":"1.0-latest"},"name":"accauth-policysrv"},"spec":{"destination":{"namespace":"sudytech-accauth","server":"https://kubernetes.default.svc"},"project":"sudytech-accauth","source":{"path":"accauth-policysrv/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-accauth.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"c9605581af7f8ea48834c51294421fecf52e8bb0","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/policy-service:0.2.20"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-12-15T08:16:32Z","labels":{"project":"sudytech-accauth","ver":"1.0-latest"},"name":"accauth-shared"},"spec":{"destination":{"namespace":"sudytech-accauth","server":"https://kubernetes.default.svc"},"project":"sudytech-accauth","source":{"path":"accauth-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-accauth.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"f90060336125bb17a59ac546386367eb8bb3baa7","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-12-15T08:23:17Z","labels":{"project":"sudytech-accauth","ver":"1.0-latest"},"name":"accauth-web"},"spec":{"destination":{"namespace":"sudytech-accauth","server":"https://kubernetes.default.svc"},"project":"sudytech-accauth","source":{"path":"accauth-web/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-accauth.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"145399e7acab9db00f24a8cbc76c3d610c4a27e5","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["docker.io/istio/proxyv2:1.11.7","testhub.sudytech.cn/accauth/accuth-web:latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-09T01:11:19Z","labels":{"project":"sudytech-datasync","ver":"xgkjdx-custom-1.1-latest"},"name":"app-sync"},"spec":{"destination":{"namespace":"sudytech-datasync","server":"https://kubernetes.default.svc"},"project":"sudytech-datasync","source":{"path":"app-sync/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-datasync.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"0feabd7d74be4741e6b84dbe5ece13c5db466a7d","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/app-sync:0.0.11"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-09T01:11:13Z","labels":{"project":"sudytech-datasync","ver":"xgkjdx-custom-1.1-latest"},"name":"app-sync-backend"},"spec":{"destination":{"namespace":"sudytech-datasync","server":"https://kubernetes.default.svc"},"project":"sudytech-datasync","source":{"path":"app-sync-backend/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-datasync.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"e08e8c7f01fffb30ef4b8f5af12d679e188b2305","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/datasync-server:0.0.4"]},"sync":{"status":"Synced"}}},{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Application\",\"metadata\":{\"annotations\":{},\"name\":\"appcenter-server\",\"namespace\":\"argocd\"},\"spec\":{\"destination\":{\"server\":\"https://kubernetes.default.svc\"},\"project\":\"sudy-system\",\"source\":{\"path\":\"appcenter-server/overlays/staging-240\",\"repoURL\":\"https://helpwx.com/deploy/cucplus.git\",\"targetRevision\":\"HEAD\"},\"syncPolicy\":{\"automated\":{\"prune\":true,\"selfHeal\":true}}}}\n"},"creationTimestamp":"2022-11-01T05:32:03Z","name":"appcenter-server"},"spec":{"destination":{"server":"https://kubernetes.default.svc"},"project":"sudy-system","source":{"path":"appcenter-server/overlays/staging-240","repoURL":"https://helpwx.com/deploy/cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true}}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"144b21644e78b91447a9c0812304260027d8b10a"}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/appcenter-server/appcenter-server:1.7"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-04-04T02:46:23Z","labels":{"project":"sudytech-system","ver":"0.1.0"},"name":"argo2nats"},"spec":{"destination":{"namespace":"sudytech-system","server":"https://kubernetes.default.svc"},"project":"sudytech-system","source":{"path":"argo2nats/overlays/staging-240","repoURL":"https://helpwx.com/deploy/staging/sudytech-system.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"1e7cb03a166a349b1e50fe0156ec0e921e281021","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/susytech-system/argo2nats:0.1.7"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2022-11-24T09:29:34Z","labels":{"project":"sudytech-ywtb","ver":"1.0.3"},"name":"attachment-frontend-api"},"spec":{"destination":{"namespace":"sudytech-ywtb","server":"https://kubernetes.default.svc"},"project":"sudytech-ywtb","source":{"path":"attachment-frontend-api/overlays/staging-240","repoURL":"https://helpwx.com/deploy/staging/sudytech-ywtb.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"46727ed39611de40e31cdba86e082121dbea8b52","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/appcenter-server/attachment-frontend-api:1.0.0"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-02-23T05:37:15Z","labels":{"project":"sudytech-system","ver":"0.1.1"},"name":"attachment-service"},"spec":{"destination":{"namespace":"sudytech-system","server":"https://kubernetes.default.svc"},"project":"sudytech-system","source":{"path":"attachment-service/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-system.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"fdfcd6454bfb3ce77ff7a14a7ee8769a5bd82027","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/susytech-system/attachment-service:latest"]},"sync":{"status":"Synced"}}},{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Application\",\"metadata\":{\"annotations\":{},\"name\":\"cas-proxy-cucplus\",\"namespace\":\"argocd\"},\"spec\":{\"destination\":{\"server\":\"https://kubernetes.default.svc\"},\"project\":\"sudy-system\",\"source\":{\"path\":\"casproxy/overlays/staging-240\",\"repoURL\":\"https://helpwx.com/deploy/cucplus.git\",\"targetRevision\":\"HEAD\"},\"syncPolicy\":{\"automated\":{\"prune\":true,\"selfHeal\":true}}}}\n"},"creationTimestamp":"2022-10-21T02:31:53Z","name":"cas-proxy-cucplus"},"spec":{"destination":{"server":"https://kubernetes.default.svc"},"project":"sudy-system","source":{"path":"casproxy/overlays/staging-240","repoURL":"https://helpwx.com/deploy/cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true}}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"d25c51da7889ae64d72bb0663d4a28b5ac1be2f8"}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/coreplus-auth-proxy-envoy:0.6.5"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:41:21Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"cas-redis"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"cas-redis/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"bfcfa28c3324920ebf5d8bfbeee14c6ac502fd27","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/busybox:1.28","hub.sudytech.cn/library/redis:6.2.5"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-10T03:24:02Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"cas-web"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"cas-web/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"0a2a9873d9ee32a468c7b4306efd8b19398ee71b","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/curlimages/curl:7.87.0","hub.sudytech.cn/library/jmx:21","testhub.sudytech.cn/idsplus/casall:2.15.68-yhzt-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-02-29T03:12:34Z","labels":{"project":"sudytech-configsvc","ver":"0.2.5-latest"},"name":"config-service"},"spec":{"destination":{"namespace":"sudytech-system","server":"https://kubernetes.default.svc"},"project":"sudytech-configsvc","source":{"path":"config-service/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-configsvc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"f1009cbc3a48166c413f603417eaa44ad86396cf","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/susytech-system/config-service:0.2.5-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-11-18T09:46:58Z","labels":{"project":"sudytech-cpc","ver":"1.16-latest"},"name":"cpc-backend"},"spec":{"destination":{"namespace":"sudytech-cpc","server":"https://kubernetes.default.svc"},"project":"sudytech-cpc","source":{"path":"cpc-backend/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cpc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"1bab8d1ffc0617f3138c729b2047c0a9c4730efc","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/curlimages/curl:7.87.0","testhub.sudytech.cn/sudytech-cpc/cpc-backend:1.2.7"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-11-16T02:50:16Z","labels":{"project":"sudytech-cpc","ver":"1.10-testing"},"name":"cpc-dgraph"},"spec":{"destination":{"namespace":"sudytech-cpc","server":"https://kubernetes.default.svc"},"project":"sudytech-cpc","source":{"path":"cpc-dgraph/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cpc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"69ad5ca995cb5d6cc76b3b2280ed645836f85bc3","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/dgraph:v23.1.0-latest","hub.sudytech.cn/sudytech-cpc/cpc-init-data:1.0"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:54:05Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"cpc-frontend-api"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"cpc-frontend-api/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"5db88166adb692a72b7558285896b49fd6bb2772","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/cucplus/cpc-api-server:1.2.4","hub.sudytech.cn/library/istio/proxyv2:1.11.7"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-03-24T00:44:44Z","labels":{"project":"sudytech-cpc","ver":"1.12"},"name":"cpc-shared"},"spec":{"destination":{"namespace":"sudytech-cpc","server":"https://kubernetes.default.svc"},"project":"sudytech-cpc","source":{"path":"cpc-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cpc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"0444664f6848bbac3845dbaf63005c04999807ed","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-09-19T08:56:52Z","labels":{"project":"sudytech-crs","ver":"1.0-latest"},"name":"crs-backend"},"spec":{"destination":{"namespace":"sudytech-crs","server":"https://kubernetes.default.svc"},"project":"sudytech-crs","source":{"path":"crs-backend/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-crs.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true","ApplyOutOfSyncOnly=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"HEAD","syncStrategy":{"apply":{"force":true}}}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/crd-svc:1.0"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-06T09:49:14Z","labels":{"project":"sudytech-cuc","ver":"dev-latest"},"name":"cuc-cacheapi"},"spec":{"destination":{"namespace":"sudytech-cuc","server":"https://kubernetes.default.svc"},"project":"sudytech-cuc","source":{"path":"cuc-cacheapi/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cuc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"aae687cccc49a91156249cfe96d538a6b78d2604","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/busybox:1.28","testhub.sudytech.cn/cucplus/cuc-cache:1.1.15-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:56:27Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"cuc-cpc-iap"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"cuc-cpc-iap/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"0f5e011e0116216665fe0addb0282b85c309d0f5","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/iap-auth-proxy-istio:0.0.2"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-20T09:36:45Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"cuc-frontend-api"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"cuc-frontend-api/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"f9dccb86f1f4be2be9457db2fda505384c3f8979","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/cuc-back:1.2.25-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:16:01Z","labels":{"project":"sudytech-cuc","ver":"dev-latest"},"name":"cuc-job"},"spec":{"destination":{"namespace":"sudytech-cuc","server":"https://kubernetes.default.svc"},"project":"sudytech-cuc","source":{"path":"cuc-job/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cuc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"ee41d4f05967a4ec88246bc24bb349b4051aff99","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/cuc-job:1.1.20"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:16:19Z","labels":{"project":"sudytech-cuc","ver":"dev-latest"},"name":"cuc-logs"},"spec":{"destination":{"namespace":"sudytech-cuc","server":"https://kubernetes.default.svc"},"project":"sudytech-cuc","source":{"path":"cuc-logs/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cuc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"0822502a9d64b71f626668ce0fd2abc036065f85","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/cuc-logs:1.0.34-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-11-01T07:24:10Z","labels":{"project":"sudytech-cuc","ver":"dev-latest"},"name":"cuc-shared"},"spec":{"destination":{"namespace":"sudytech-cuc","server":"https://kubernetes.default.svc"},"project":"sudytech-cuc","source":{"path":"cuc-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cuc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"866ce241efffaf961f2cf8933a86ff1ce4d6a29e","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:17:18Z","labels":{"project":"sudytech-cuc","ver":"dev-latest"},"name":"cuc-sync"},"spec":{"destination":{"namespace":"sudytech-cuc","server":"https://kubernetes.default.svc"},"project":"sudytech-cuc","source":{"path":"cuc-sync/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cuc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"c69643d5089f95ae36010349412e56aa59f5d910","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/sync:1.0.29"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-04T05:38:44Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"cuc-web"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"cuc-web/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"19b4bab0dbf5e822e55e5a6e416c2698ff76656f","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/nginx:tegine_2.2.3_s1","testhub.sudytech.cn/cucplus/yhzt-static:dev27.9.7-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:14:30Z","labels":{"project":"sudytech-cuc","ver":"dev-latest"},"name":"cuc2-mysql"},"spec":{"destination":{"namespace":"sudytech-cuc","server":"https://kubernetes.default.svc"},"project":"sudytech-cuc","source":{"path":"cuc2-mysql/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cuc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"7c95c51820b4952b22cb79da71fb780d0301406d","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/cucplus/cuc-face:1.0.0","hub.sudytech.cn/cucplus/cuc-server3:1.2.27.2","hub.sudytech.cn/cucplus/ids-server:1.2.20.3","hub.sudytech.cn/cucplus/sync:1.0.15","hub.sudytech.cn/library/mysql:5.7.32_sudy"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-20T06:56:26Z","labels":{"project":"sudytech-cuc","ver":"dev-latest"},"name":"cuc3-backend"},"spec":{"destination":{"namespace":"sudytech-cuc","server":"https://kubernetes.default.svc"},"project":"sudytech-cuc","source":{"path":"cuc3-backend/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cuc.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"5df68ad3d9f91f45fcf1da3dc4f3e94a740456ed","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/cuc-server3:1.2.37-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:49:09Z","labels":{"project":"sudytech-cucplus","ver":"1.6.3"},"name":"cucplus-shared"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"cucplus-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"5bdbc2aae9f41da679964144a47c02cecf4375ee","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-04-23T10:02:56Z","labels":{"project":"sudytech-datasync","ver":"dev-latest"},"name":"datasync-backend"},"spec":{"destination":{"namespace":"sudytech-datasync","server":"https://kubernetes.default.svc"},"project":"sudytech-datasync","source":{"path":"datasync-backend/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-datasync.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"db255e0fc8f93a01f2d2bae011cdc21e195a7480","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/datasync:8.1.13"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-11-15T01:05:36Z","labels":{"project":"sudytech-datasync","ver":"1.10"},"name":"datasync-shared"},"spec":{"destination":{"namespace":"sudytech-datasync","server":"https://kubernetes.default.svc"},"project":"sudytech-datasync","source":{"path":"datasync-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-datasync.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"0796aae15e432f2ab2c6ef7947a3d6a2d4e40ac5","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-10-07T05:39:54Z","labels":{"project":"dragonflydb","ver":"0.15.2-testing"},"name":"dragonflydb"},"spec":{"destination":{"namespace":"dragonflydb","server":"https://kubernetes.default.svc"},"project":"dragonflydb","source":{"path":"dragonflydb/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/dragonflydb.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"9db766999ef089fa6ad91ab4cf3c2f1302ed0ee4","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/busybox:1.28","hub.sudytech.cn/library/redis:6.2.5"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-09-18T09:30:16Z","labels":{"project":"sudytech-edu","ver":"1.2-latest"},"name":"edu-sse-server"},"spec":{"destination":{"namespace":"sudytech-edu","server":"https://kubernetes.default.svc"},"project":"sudytech-edu","source":{"path":"edu-sse-server/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-edu.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true","ApplyOutOfSyncOnly=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"HEAD","syncStrategy":{"apply":{"force":true}}}},"phase":"Succeeded"},"summary":{"images":["docker.io/istio/proxyv2:1.11.7","testhub.sudytech.cn/edu/yiban-sse-server:0.1.1-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-02-29T05:31:12Z","labels":{"project":"etcd","ver":"3.4.24-latest"},"name":"etcd"},"spec":{"destination":{"namespace":"etcd","server":"https://kubernetes.default.svc"},"project":"etcd","source":{"path":"etcd/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/etcd.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"352aa9dd78e4f54a87564e749d950f88fa4c5485","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/k8s/etcd:3.4.24"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-10T08:26:42Z","labels":{"project":"sudytech-faceid","ver":"dev-latest"},"name":"faceid-backend"},"spec":{"destination":{"namespace":"sudytech-faceid","server":"https://kubernetes.default.svc"},"project":"sudytech-faceid","source":{"path":"faceid-backend/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-faceid.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"9a6bd5d8342d97f308311735ec1dec70587c5fb5","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/cuc-face:2.0.12-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-11-03T06:11:16Z","labels":{"project":"sudytech-faceid","ver":"1.6.3"},"name":"faceid-shared"},"spec":{"destination":{"namespace":"sudytech-faceid","server":"https://kubernetes.default.svc"},"project":"sudytech-faceid","source":{"path":"faceid-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-faceid.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"1c9eb1fc78e3595cb3a087eb8f8975d51d19c1df","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-11-20T05:30:39Z","labels":{"project":"sudytech-faceid","ver":"dev-latest"},"name":"faceid2-backend"},"spec":{"destination":{"namespace":"sudytech-faceid","server":"https://kubernetes.default.svc"},"project":"sudytech-faceid","source":{"path":"faceid2-backend/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-faceid.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"2b0082a202f376fae46237d1f509886f697792f2","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/face-server:1.0.31-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-11-03T06:18:01Z","labels":{"project":"sudytech-idcenter","ver":"1.6"},"name":"idcenter-shared"},"spec":{"destination":{"namespace":"sudytech-idcenter","server":"https://kubernetes.default.svc"},"project":"sudytech-idcenter","source":{"path":"idcenter-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-idcenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"471894ea5a34c442e1c848013472f9df717160cf","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Application\",\"metadata\":{\"annotations\":{},\"name\":\"idgen-server\",\"namespace\":\"argocd\"},\"spec\":{\"destination\":{\"server\":\"https://kubernetes.default.svc\"},\"project\":\"sudy-system\",\"source\":{\"path\":\"idgen-server/overlays/staging-240\",\"repoURL\":\"https://helpwx.com/deploy/sudytech-system.git\",\"targetRevision\":\"HEAD\"},\"syncPolicy\":{\"automated\":{\"prune\":true,\"selfHeal\":true}}}}\n"},"creationTimestamp":"2022-10-21T02:12:34Z","name":"idgen-server"},"spec":{"destination":{"server":"https://kubernetes.default.svc"},"project":"sudy-system","source":{"path":"idgen-server/overlays/staging-240","repoURL":"https://helpwx.com/deploy/sudytech-system.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true}}},"status":{"health":{"status":"Healthy"},"summary":{"images":["testhub.sudytech.cn/library/idgen-server:1.0"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:29:27Z","labels":{"project":"sudytech-idcenter","ver":"dev-latest"},"name":"ids-backend"},"spec":{"destination":{"namespace":"sudytech-idcenter","server":"https://kubernetes.default.svc"},"project":"sudytech-idcenter","source":{"path":"ids-backend/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-idcenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"0b5fd0320f97cda9d3d2f0825610ac249aa57b58","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/ids-server:1.2.26-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:51:36Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"ids-frontend-api"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"ids-frontend-api/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"ff631f7aa5b5bc8ed4d0e505c5fddf329933f0c0","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/ids:2.1.17-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-11-15T05:16:02Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"imp-ldap"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"imp-ldap/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"59125c68c50ce44d0afba1f8ef1f06979a481cdb","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/library/ldap:2.4.46_5.3.28_4"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-11-28T09:05:02Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"imp-web"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"imp-web/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"d155ec4376d5bd5eb9dd71200643e0e7c8f5bbe1","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/imps:2.14.19-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-07-27T04:54:48Z","labels":{"project":"sudytech-infocenter","ver":"3.1.11-testing"},"name":"mnews-shared"},"spec":{"destination":{"namespace":"sudytech-infocenter","server":"https://kubernetes.default.svc"},"project":"sudytech-infocenter","source":{"path":"mnews-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-infocenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"8bb1b2edc71fd7f544e65fc2aef8f737aa571ba1","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-06-21T08:19:30Z","labels":{"project":"mongodb","ver":"4.2.1"},"name":"mongodb"},"spec":{"destination":{"namespace":"mongodb","server":"https://kubernetes.default.svc"},"project":"mongodb","source":{"path":"mongodb/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/mongodb.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Missing"},"operationState":{"operation":{"sync":{"prune":true,"revision":"c3d87e516027f152c95360468ea38cda71da4679","syncOptions":["CreateNamespace=true"]}},"phase":"Failed"},"summary":{},"sync":{"status":"OutOfSync"}}},{"metadata":{"creationTimestamp":"2023-06-21T08:24:22Z","labels":{"project":"mysql5","ver":"5.7.32"},"name":"mysql5"},"spec":{"destination":{"namespace":"mysql5","server":"https://kubernetes.default.svc"},"project":"mysql5","source":{"path":"mysql5/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/mysql5.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"527aed943b5900686e65b0892fd53f69be580dc0","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/mysql:5.7.32"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-02-27T06:30:50Z","labels":{"project":"sudytech-system","ver":"1.0"},"name":"nats"},"spec":{"destination":{"namespace":"nats","server":"https://kubernetes.default.svc"},"project":"sudytech-system","source":{"path":"nats/overlays/staging-240","repoURL":"https://helpwx.com/deploy/staging/sudytech-system.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"ac66a3d5baa4726eefd953db92ea3f7ae0cba81f","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/nats:2.9.11-alpine"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-11-01T10:44:08Z","labels":{"project":"sudytech-apicenter","ver":"1.3.4"},"name":"opengw-gw"},"spec":{"destination":{"namespace":"sudytech-opengw","server":"https://kubernetes.default.svc"},"project":"sudytech-apicenter","source":{"path":"opengw-gw/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-apicenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"c43946160beef051a2876cce8f2946a5d1493093","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/apisix:2.4.5","hub.sudytech.cn/library/fluent/fluentd:v1.9-1"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-11-01T10:32:47Z","labels":{"project":"sudytech-apicenter","ver":"1.2"},"name":"opengw-shared"},"spec":{"destination":{"namespace":"sudytech-opengw","server":"https://kubernetes.default.svc"},"project":"sudytech-apicenter","source":{"path":"opengw-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-apicenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"e92ecf651d2f0d2a3426ba56ec431ecd0591a70a","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-11-04T02:21:57Z","labels":{"project":"sudytech-apicenter","ver":"1.4.5"},"name":"opengw-web"},"spec":{"destination":{"namespace":"sudytech-opengw","server":"https://kubernetes.default.svc"},"project":"sudytech-apicenter","source":{"path":"opengw-web/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-apicenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"958bf0a3ded8c4204ab6309b3f9abab72c45a9f4","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/opengw/opengw:1.0.12"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-02T06:26:23Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"pcen-frontend-api"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"pcen-frontend-api/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"25206c2b3e2a06301b31e6acf52afcf3f520c768","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/cuc-pcen:1.0.34-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-30T12:58:45Z","labels":{"project":"sudytech-cucplus","ver":"dev-latest"},"name":"pcen-web"},"spec":{"destination":{"namespace":"sudytech-cucplus","server":"https://kubernetes.default.svc"},"project":"sudytech-cucplus","source":{"path":"pcen-web/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"61c2b87383fc9db39d6a8403273addb49f686c2e","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/nginx:tegine_2.2.3_s1","testhub.sudytech.cn/cucplus/yhzt-static:dev27.9.7-latest"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-07-08T01:48:21Z","labels":{"project":"sudytech-appcenter","ver":"4.0-testing"},"name":"portal-shared"},"spec":{"destination":{"namespace":"sudytech-appcenter","server":"https://kubernetes.default.svc"},"project":"sudytech-appcenter","source":{"path":"portal-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-appcenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"382a7c73be1d25ced412d5ee62d5315fc3e48ffa","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2022-10-21T05:51:48Z","labels":{"project":"sudytech-system","ver":"1.0"},"name":"system-shared"},"spec":{"destination":{"namespace":"sudytech-system","server":"https://kubernetes.default.svc"},"project":"sudytech-system","source":{"path":"system-shared/overlays/staging-240","repoURL":"https://helpwx.com/deploy/staging/sudytech-system.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"783b0c00b562649bc8503dc01a43d0d0b437a706","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-25T01:18:40Z","labels":{"project":"sudytech-msgcenter","ver":"2.5-latest"},"name":"ucpplus-mongo"},"spec":{"destination":{"namespace":"sudytech-msgcenter","server":"https://kubernetes.default.svc"},"project":"sudytech-msgcenter","source":{"path":"ucpplus-mongo/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-msgcenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"7ea7ce3881c5c7c7b8f144b9c396ce1d968fa2b5","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/mongo:4.2.1","hub.sudytech.cn/ucpplus/ucp:2.5"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-09-29T02:01:15Z","labels":{"project":"sudytech-msgcenter","ver":"2.4.3"},"name":"ucpplus-mysql"},"spec":{"destination":{"namespace":"sudytech-msgcenter","server":"https://kubernetes.default.svc"},"project":"sudytech-msgcenter","source":{"path":"ucpplus-mysql/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-msgcenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"1828598002aaeca9cbb7932efcbc2b059c857b60","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/mysql:5.7.32_sudy","hub.sudytech.cn/ucpplus/ucp:2.4.3"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-10-25T01:23:05Z","labels":{"project":"sudytech-msgcenter","ver":"2.5-latest"},"name":"ucpplus-redis"},"spec":{"destination":{"namespace":"sudytech-msgcenter","server":"https://kubernetes.default.svc"},"project":"sudytech-msgcenter","source":{"path":"ucpplus-redis/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-msgcenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"4fe217dbf70f2159abf5abecfaf5e6909441b934","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["hub.sudytech.cn/library/busybox:1.28","hub.sudytech.cn/library/redis:6.2.5"]},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-09-29T02:06:24Z","labels":{"project":"sudytech-msgcenter","ver":"2.3"},"name":"ucpplus-shared"},"spec":{"destination":{"namespace":"sudytech-msgcenter","server":"https://kubernetes.default.svc"},"project":"sudytech-msgcenter","source":{"path":"ucpplus-shared/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-msgcenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"904d24625fa7c32bc87291ded115e79f9e3a5c9c","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2024-12-11T01:14:42Z","labels":{"project":"sudytech-msgcenter","ver":"2.5.4-latest"},"name":"ucpplus-web"},"spec":{"destination":{"namespace":"sudytech-msgcenter","server":"https://kubernetes.default.svc"},"project":"sudytech-msgcenter","source":{"path":"ucpplus-web/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sudytech-msgcenter.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Degraded"},"operationState":{"operation":{"sync":{"prune":true,"revision":"4a70d89c6184d6f6be355b0056f77b9dda702fc0","syncOptions":["CreateNamespace=true"]}},"phase":"Failed"},"summary":{"images":["hub.sudytech.cn/library/curlimages/curl:7.87.0","hub.sudytech.cn/library/jmx:21","hub.sudytech.cn/ucpplus/ucp:2.5.4"]},"sync":{"status":"OutOfSync"}}},{"metadata":{"creationTimestamp":"2024-10-11T01:52:18Z","labels":{"project":"sii-loginpage","ver":"dev-latest"},"name":"yhzt"},"spec":{"destination":{"namespace":"sii-loginpage","server":"https://kubernetes.default.svc"},"project":"sii-loginpage","source":{"path":"yhzt/overlays/staging-240","repoURL":"https://gitops.sudytech.cn/deploy/staging/sii-loginpage.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"5c6524478922b3d0f8f1a92c413773359f0bb3bc","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-02-06T10:11:40Z","labels":{"project":"sudytech-ywtb","ver":"1.0.5"},"name":"ywtb-cuc-frontend-api"},"spec":{"destination":{"namespace":"sudytech-ywtb","server":"https://kubernetes.default.svc"},"project":"sudytech-ywtb","source":{"path":"ywtb-cuc-frontend-api/overlays/staging-240","repoURL":"https://helpwx.com/deploy/staging/sudytech-ywtb.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"9aa211e59299ca9bd1be135f5098f92083de7d00","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/cucplus/cuc-back:1.2.4"]},"sync":{"status":"Synced"}}},{"metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"argoproj.io/v1alpha1\",\"kind\":\"Application\",\"metadata\":{\"annotations\":{},\"finalizers\":[\"resources-finalizer.argocd.argoproj.io\"],\"labels\":{\"project\":\"sudy-system\"},\"name\":\"ywtb-frontend-api\",\"namespace\":\"argocd\"},\"spec\":{\"destination\":{\"server\":\"https://kubernetes.default.svc\"},\"project\":\"sudytech-sop\",\"source\":{\"path\":\"ywtb-frontend-api/overlays/staging-240\",\"repoURL\":\"https://helpwx.com/deploy/cucplus.git\",\"targetRevision\":\"HEAD\"},\"syncPolicy\":{\"automated\":{\"prune\":true}}}}\n"},"creationTimestamp":"2023-11-20T08:04:18Z","deletionTimestamp":"2023-11-20T08:17:05Z","labels":{"project":"sudy-system"},"name":"ywtb-frontend-api"},"spec":{"destination":{"server":"https://kubernetes.default.svc"},"project":"sudytech-sop","source":{"path":"ywtb-frontend-api/overlays/staging-240","repoURL":"https://helpwx.com/deploy/cucplus.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true}}},"status":{"health":{"status":"Unknown"},"summary":{},"sync":{"status":"Unknown"}}},{"metadata":{"creationTimestamp":"2023-02-06T09:31:28Z","labels":{"project":"sudytech-ywtb","ver":"1.0.3"},"name":"ywtb-shared"},"spec":{"destination":{"namespace":"sudytech-ywtb","server":"https://kubernetes.default.svc"},"project":"sudytech-ywtb","source":{"path":"ywtb-shared/overlays/staging-240","repoURL":"https://helpwx.com/deploy/staging/sudytech-ywtb.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"bef7c7d8330182cc5bc4af6b8c5c9bae7596a204","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{},"sync":{"status":"Synced"}}},{"metadata":{"creationTimestamp":"2023-02-06T10:25:12Z","labels":{"project":"sudytech-ywtb","ver":"1.0.3"},"name":"ywtbcpc-frontend-api"},"spec":{"destination":{"namespace":"sudytech-ywtb","server":"https://kubernetes.default.svc"},"project":"sudytech-ywtb","source":{"path":"ywtbcpc-frontend-api/overlays/staging-240","repoURL":"https://helpwx.com/deploy/staging/sudytech-ywtb.git","targetRevision":"HEAD"},"syncPolicy":{"automated":{"prune":true,"selfHeal":true},"syncOptions":["CreateNamespace=true"]}},"status":{"health":{"status":"Healthy"},"operationState":{"operation":{"sync":{"prune":true,"revision":"df2a9444a572d8f11598edfe2c44ad6e1b6afb9b","syncOptions":["CreateNamespace=true"]}},"phase":"Succeeded"},"summary":{"images":["testhub.sudytech.cn/appcenter-server/ywtbcpc-frontend-api:1.0.3"]},"sync":{"status":"Synced"}}}],"metadata":{"resourceVersion":"505458349"}}`

	// 定义一个结构体来接收解析的数据
	var response ItemsResponse

	// Unmarshal JSON 数据到结构体
	err := json.Unmarshal([]byte(jsonData), &response)
	if err != nil {
		log.Fatalf("Error unmarshaling JSON: %v", err)
	}

	// 输出格式化的结果
	var output []Output

	// 处理每个 Item
	for _, item := range response.Items {
		// 判断部署模式
		deployMode := "非2.0模式"
		if strings.Contains(item.Spec.Source.RepoURL, "gitops.sudytech.cn/deploy/staging") {
			deployMode = "2.0部署模式"
		}

		// 创建输出对象
		output = append(output, Output{
			ProductName: item.Metadata.Labels.Project,
			AppName:     item.Metadata.Name,
			AppVersion:  item.Metadata.Labels.Ver,
			DeployMode:  deployMode,
		})
	}

	// 使用 MarshalIndent 格式化输出 JSON
	result, err := json.MarshalIndent(output, "", "    ")
	if err != nil {
		log.Fatalf("Error marshaling JSON: %v", err)
	}

	// 打印输出
	fmt.Println(string(result))
}
